"use strict";(self["webpackChunkanimerecordvue"]=self["webpackChunkanimerecordvue"]||[]).push([[810],{6810:function(e,t,i){i.r(t),i.d(t,{default:function(){return S}});var s=i(6252),o=i(3577);const r={class:"row g-0"},a=(0,s._)("div",{class:"col h2"},"時間:",-1),n={class:"col h2"},h={class:"row g-0"},l=(0,s._)("div",{class:"col h2"},"分數:",-1),c={class:"col h2"},d={class:"row g-0"},p=(0,s._)("div",{class:"col h2"},"平均每秒得分:",-1),m={class:"col h2"},y={ref:"canvasContainer",class:"position-absolute top-50 start-50 translate-middle"};function w(e,t,i,w,u,v){return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",r,[a,(0,s._)("div",n,(0,o.zw)(u.time),1)]),(0,s._)("div",h,[l,(0,s._)("div",c,(0,o.zw)(u.score),1)]),(0,s._)("div",d,[p,(0,s._)("div",m,(0,o.zw)(u.average),1)]),(0,s._)("div",y,"操作: 方向鍵",512)],64)}var u=i(9477),v={data(){return{startTime:null,currentTime:null,time:"00:00:00.000",score:0,average:0}},created(){this.startTime=new Date,this.updateTime(),setInterval(this.updateTime,1)},mounted(){this.init()},methods:{updateTime(){this.currentTime=new Date;let e=Math.floor(this.currentTime-this.startTime),t=Math.floor(e/1e3),i=Math.floor(e/36e5);e%=36e5;let s=Math.floor(e/6e4);e%=6e4;let o=Math.floor(e/1e3),r=e%1e3;this.time=this.pad(i)+":"+this.pad(s)+":"+this.pad(o)+"."+this.padMS(r),this.average=t>0?(this.score/t).toFixed(2):0},pad(e){return e.toString().padStart(2,"0")},padMS(e){return e.toString().padStart(3,"0")},init(){this.scene=new u.xsS,this.camera=new u.iKG(0,10,10,0,-1,1e3),this.renderer=new u.CP7,this.renderer.setSize(500,500),this.$refs.canvasContainer.appendChild(this.renderer.domElement);const e=new u.xo$(.5,32,32),t=new u.vBJ({color:16776960});this.player=new u.Kj0(e,t),this.player.position.set(5,5,1),this.scene.add(this.player);const i=new u.xo$(.5,32,32),s=new u.vBJ({color:16711680});this.obstacle=new u.Kj0(i,s),this.obstacle.position.set(2,2,1),this.scene.add(this.obstacle),this.camera.position.z=5,this.initGameLogic(),this.animate()},initGameLogic(){this.player.position.x=5,this.player.position.y=5,this.keyState={ArrowUp:!1,ArrowDown:!1,ArrowLeft:!1,ArrowRight:!1},document.addEventListener("keydown",this.onKeyDown),document.addEventListener("keyup",this.onKeyUp)},onKeyDown(e){this.keyState[e.key]=!0},onKeyUp(e){this.keyState[e.key]=!1},movePlayer(){const e=.1;this.keyState.ArrowUp&&(this.player.position.y+=e),this.keyState.ArrowDown&&(this.player.position.y-=e),this.keyState.ArrowLeft&&(this.player.position.x-=e),this.keyState.ArrowRight&&(this.player.position.x+=e),this.player.position.x=u.M8C.clamp(this.player.position.x,0,10),this.player.position.y=u.M8C.clamp(this.player.position.y,0,10)},animate(){this.player.position.distanceTo(this.obstacle.position)<1&&(this.obstacle.position.set(u.M8C.randFloat(0,10),u.M8C.randFloat(0,10),this.obstacle.position.z),this.score+=1),this.movePlayer(),requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)}},beforeUnmount(){document.removeEventListener("keydown",this.onKeyDown),document.removeEventListener("keyup",this.onKeyUp)}},k=i(3744);const f=(0,k.Z)(v,[["render",w]]);var S=f}}]);
//# sourceMappingURL=810.538d103f.js.map